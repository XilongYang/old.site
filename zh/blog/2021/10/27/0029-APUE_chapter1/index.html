<!DOCTYPE html>
<html lang="zh-CN">
<head>
    <meta charset="utf-8">
    <meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1">
    <meta name="keywords" content="Hexo Theme Keep">
    <meta name="description" content="Hexo Theme Keep">
    <meta name="author" content="Xilong Yang">
    
    <title>
        
            APUE学习笔记00——UNIX基础 |
        
        在泥坑里跳来跳去
    </title>
    
<link rel="stylesheet" href="/zh/blog/css/style.css">

    <link rel="shortcut icon" href="/zh/blog/../../res/favicon.ico">
    
<link rel="stylesheet" href="/zh/blog/css/font-awesome.min.css">

    <script id="hexo-configurations">
    let KEEP = window.KEEP || {};
    KEEP.hexo_config = {"hostname":"xilong.site","root":"/zh/blog/","language":"zh-CN","path":"search.xml"};
    KEEP.theme_config = {"toc":{"enable":true,"number":false,"expand_all":true,"init_open":true},"style":{"primary_color":"#D31919","avatar":"../../res/me.jpg","favicon":"../../res/favicon.ico","article_img_align":"left","left_side_width":"260px","content_max_width":"920px","hover":{"shadow":false,"scale":false},"first_screen":{"enable":false,"background_img":null,"description":"To be or not to be, 这么着还是那么着。"},"scroll":{"progress_bar":{"enable":false},"percent":{"enable":false}}},"local_search":{"enable":true,"preload":false},"code_copy":{"enable":false,"style":"default"},"pjax":{"enable":false},"lazyload":{"enable":false},"version":"3.4.5"};
    KEEP.language_ago = {"second":"%s 秒前","minute":"%s 分钟前","hour":"%s 小时前","day":"%s 天前","week":"%s 周前","month":"%s 个月前","year":"%s 年前"};
  </script>
<meta name="generator" content="Hexo 5.4.0"></head>


<body>
<div class="progress-bar-container">
    

    
</div>


<main class="page-container">

    

    <div class="page-main-content">

        <div class="page-main-content-top">
            <header class="header-wrapper">

    <div class="header-content">
        <div class="left">
            
            <a class="logo-title" href="/">
                在泥坑里跳来跳去
            </a>
        </div>

        <div class="right">
            <div class="pc">
                <ul class="menu-list">
                    
                        <li class="menu-item">
                            <a class=""
                               href="/zh/blog/"
                            >
                                首页
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/zh/blog/archives"
                            >
                                归档
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/zh/blog/categories"
                            >
                                分类
                            </a>
                        </li>
                    
                        <li class="menu-item">
                            <a class=""
                               href="/zh/blog/../../"
                            >
                                关于
                            </a>
                        </li>
                    
                    
                        <li class="menu-item search search-popup-trigger">
                            <i class="fas fa-search"></i>
                        </li>
                    
                </ul>
            </div>
            <div class="mobile">
                
                    <div class="icon-item search search-popup-trigger"><i class="fas fa-search"></i></div>
                
                <div class="icon-item menu-bar">
                    <div class="menu-bar-middle"></div>
                </div>
            </div>
        </div>
    </div>

    <div class="header-drawer">
        <ul class="drawer-menu-list">
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/zh/blog/">首页</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/zh/blog/archives">归档</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/zh/blog/categories">分类</a>
                </li>
            
                <li class="drawer-menu-item flex-center">
                    <a class=""
                       href="/zh/blog/../../">关于</a>
                </li>
            
        </ul>
    </div>

    <div class="window-mask"></div>

</header>


        </div>

        <div class="page-main-content-middle">

            <div class="main-content">

                
                    <div class="fade-in-down-animation">
    <div class="article-content-container">

        <div class="article-title">
            <span class="title-hover-animation">APUE学习笔记00——UNIX基础</span>
        </div>

        
            <div class="article-header">
                <div class="avatar">
                    <img src="/zh/blog/../../res/me.jpg">
                </div>
                <div class="info">
                    <div class="author">
                        <span class="name">Xilong Yang</span>
                        
                    </div>
                    <div class="meta-info">
                        <div class="article-meta-info">
    <span class="article-date article-meta-item">
        <i class="fas fa-edit"></i>&nbsp;
        <span class="pc">2021-10-27 20:36:29</span>
        <span class="mobile">2021-10-27 20:36</span>
    </span>
    
        <span class="article-categories article-meta-item">
            <i class="fas fa-folder"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/zh/blog/categories/0x04-APUE%E5%AD%A6%E4%B9%A0%E7%AC%94%E8%AE%B0/">0x04 APUE学习笔记</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    
    
        <span class="article-tags article-meta-item">
            <i class="fas fa-tags"></i>&nbsp;
            <ul>
                
                    <li>
                        <a href="/zh/blog/tags/Linux/">Linux</a>&nbsp;
                    </li>
                
                    <li>
                        | <a href="/zh/blog/tags/UNIX/">UNIX</a>&nbsp;
                    </li>
                
            </ul>
        </span>
    

    
    
    
    
</div>

                    </div>
                </div>
            </div>
        

        <div class="article-content markdown-body">
            <blockquote>
<p>APUE这本书实在是干而松散，不自己消化消化确实看不下去。这篇文章简单总结一下前两章，Unix基础与标准。</p>
</blockquote>
<span id="more"></span>

<h2 id="基础介绍"><a href="#基础介绍" class="headerlink" title="基础介绍"></a>基础介绍</h2><p>操作系统在狭义上单指一种控制硬件单元，为程序提供运行环境的软件，称为内核（Kernel）。内核的接口称为系统调用（System call）。</p>
<p>广义上，操作系统包括内核以及一些软件，这些软件包括了公用函数库、shell和系统实用程序（system utility）以及一些应用程序。</p>
<p>其中，公用函数库就是建立在系统调用的基础上的一些函数。应用程序既可以使用系统调用也可以使用公用函数库。shell是一个特殊的应用程序，为运行其它程序提供了一个接口。</p>
<h2 id="登录"><a href="#登录" class="headerlink" title="登录"></a>登录</h2><p>用户键入用户名与口令，系统在口令文件中读取相关信息并进行相应操作。口令文件通常是<code>/etc/passwd</code>，其中每行记录一个登录项。登录项由7个以冒号分隔的字段组成，依次是：</p>
<figure class="highlight plaintext"><table><tr><td class="gutter"><pre><span class="line">1</span><br></pre></td><td class="code"><pre><span class="line">登录名:加密口令:UID:GID:注释:起始目录:shell程序</span><br></pre></td></tr></table></figure>

<p>目前所有系统都将加密口令移到另一个文件中，但这里先略过。</p>
<p>登录后，通常进入到shell程序，shell是一个命令行解释器，它读取用户输入然后执行命令。</p>
<h2 id="文件和目录"><a href="#文件和目录" class="headerlink" title="文件和目录"></a>文件和目录</h2><p><strong>文件系统</strong></p>
<p>UNIX文件系统是目录和文件的一种层次结构，所有东西的起点是根(root)目录，其名称是<code>/</code>。</p>
<p>我们总听说UNIX中一切皆文件，对于目录也是适用的。实际上目录是一个包含目录项的文件，逻辑上可以认为每个目录项都包含一个文件名与文件属性信息。</p>
<p><strong>文件名</strong></p>
<p>目录中的各项拥有一个文件名(filename)。只有斜线<code>/</code>和空字符不能出现在文件名中。因为斜线用来分隔路径名和文件名而空字符表示路径结束。</p>
<p>但习惯上最好还是使用字母、数字、<code>.</code>、<code>-</code>、<code>_</code>作为文件名，这可以避免很多麻烦。</p>
<p>新的目录会创建两个文件名<code>.</code>、<code>..</code>，<code>.</code>指向当前目录，<code>..</code>指向上级目录。在根目录中都指向根目录。</p>
<p><strong>路径名</strong></p>
<p>由<code>/</code>分隔的一个或多个文件名组成的序列构成一个路径名，以<code>/</code>开头的称为绝对路径，以文件名开头称为相对路径。相对路径名指向相对于当前目录的文件。</p>
<p><strong>工作目录</strong></p>
<p>每个进程有一个工作目录，所有相对路径名从工作目录开始解释，进程可以使用<code>chdir</code>来更改工作目录。</p>
<p><strong>起始目录</strong></p>
<p>登录时的工作目录为起始目录，记录在口令文件中。</p>
<h2 id="输入与输出"><a href="#输入与输出" class="headerlink" title="输入与输出"></a>输入与输出</h2><p><strong>文件描述符</strong></p>
<p>文件描述符通常是一个小的非负整数，内核用以标识一个特定的进程正在访问的文件。当内核打开一个现有文件或创建一个新文件时，它都返回一个文件描述符。在读写文件时，可以使用这个文件描述符。</p>
<p><strong>标准输入</strong>、标准输出和标准错误</p>
<p>惯例上，每当运行一个新程序时，所有shell都为其打开3个文件描述符，分别为标准输入、标准输出、标准错误。如果不做特殊处理，它们都链接终端。</p>
<p>大多数shell提供一种方法，使其中任何一个都能重定向至某个文件。</p>
<p><strong>缓冲</strong></p>
<p>不带缓冲的I/O直接向文件中写入，而带缓冲的I/O在缓冲区满后才写入文件。</p>
<h2 id="程序和进程"><a href="#程序和进程" class="headerlink" title="程序和进程"></a>程序和进程</h2><p>程序是存储在磁盘上的可执行文件。内核使用<code>exec</code>函数将程序读入内存，并执行程序。</p>
<p>程序的执行实例被称为进程。UNIX系统确保每个进程都有一个唯一的数字标识符，称为PID，PID总是一个非负整数。</p>
<p>系统主要使用三个函数控制进程：<code>fork</code>、<code>exec</code>、<code>waitpid</code>。</p>
<p>通常一个进程只有一个控制线程——某一时刻执行的一组机器指令。但某些情况下可以拥有多个线程。一个进程内的所有线程共享同一地址空间、文件描述符、栈以及进程相关属性。因为它们能访问同一存储区，所以各线程在访问共享数据时需要采取同步措施以避免不一致性。</p>
<p>线程也用ID标识，称为TID。TID只在进程内起作用，对其它进程没有意义。</p>
<h2 id="出错处理"><a href="#出错处理" class="headerlink" title="出错处理"></a>出错处理</h2><p>当UNIX系统函数出错时通常返回一个负值，且整型变量<code>errno</code>通常被设置为具有特定信息的值。文件<code>&lt;errno.h&gt;</code>中定义了<code>errno</code>及可以赋予它的常量。这些常量都以字母<code>E</code>开头。对于<code>errno</code>有两条规则：</p>
<ol>
<li>只有出错时才改变它的值。</li>
<li>任何程序都不会将它的值设为0。</li>
</ol>
<p>两个函数可以用于打印出错消息，分别是：</p>
<figure class="highlight c"><table><tr><td class="gutter"><pre><span class="line">1</span><br><span class="line">2</span><br><span class="line">3</span><br><span class="line">4</span><br><span class="line">5</span><br></pre></td><td class="code"><pre><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;string.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">char</span> *<span class="title">strerror</span><span class="params">(<span class="keyword">int</span> errnum)</span></span>; <span class="comment">// errnum通常是errno值，函数将其映射为一个出错消息的字符串。</span></span><br><span class="line"></span><br><span class="line"><span class="meta">#<span class="meta-keyword">include</span> <span class="meta-string">&lt;stdio.h&gt;</span></span></span><br><span class="line"><span class="function"><span class="keyword">void</span> <span class="title">perror</span><span class="params">(<span class="keyword">const</span> <span class="keyword">char</span> *msg)</span></span>; <span class="comment">// 先输出msg，然后接一个冒号，一个空格，errno对应的消息，一个换行符。</span></span><br></pre></td></tr></table></figure>

<h2 id="用户标识"><a href="#用户标识" class="headerlink" title="用户标识"></a>用户标识</h2><p><strong>UID</strong></p>
<p>UID是一个数值，向系统标识各个不同的用户。系统管理员在确定一个用户的登录名的同时，确定其UID。用户不能更改其UID。</p>
<p>UID为0的用户为root用户。root用户拥有系统的自由支配权。</p>
<p><strong>GID</strong></p>
<p>GID是一个标识用户所在组的ID，也是由系统管理员在创建用户时分配的。组文件将组名映射为数值的GID，通常是<code>/etc/group</code>。</p>
<p><strong>SGID</strong></p>
<p>SGID是附属组ID，UNIX允许一个用户同时属于多至16个其它的组。这些信息也存在组文件中。</p>
<h2 id="信号"><a href="#信号" class="headerlink" title="信号"></a>信号</h2><p>信号用于通知进程发生了某种情况。进程有3种处理信号的方式：</p>
<ol>
<li>忽略信号。</li>
<li>按系统默认方式处理。</li>
<li>提供一个函数，信号发生时调用该函数，称为捕捉信号。</li>
</ol>
<h2 id="时间值"><a href="#时间值" class="headerlink" title="时间值"></a>时间值</h2><p><strong>日历时间</strong>：从1970年1月1日00:00:00以来经过的秒数时间值，使用<code>time_t</code>保存。</p>
<p><strong>进程时间</strong>：被称为CPU时间，用以度量进程使用的中央处理器资源。进程时间以时钟tick计算。当一个进程创建时，系统维护3个进程时间值：</p>
<ol>
<li>时钟时间，进程消耗的总时间。</li>
<li>用户CPU时间，进程执行用户指令所用的时间。</li>
<li>系统CPU时间，进程执行内核程序所用的时间。</li>
</ol>
<p>其中用户CPU时间与系统CPU时间之和称为CPU时间。</p>
<h2 id="系统调用与库函数"><a href="#系统调用与库函数" class="headerlink" title="系统调用与库函数"></a>系统调用与库函数</h2><p>系统调用是内核提供的良好定义、数量有限、直接进入内核的入口点。从应用角度考虑，可以将系统调用看做C函数。通用库函数通常调用一个或多个系统调用，其中一个关键区别在于，我们可以在需要的时候替换库函数，但无法替换系统调用。另一方面，系统调用通常提供简单而单一的功能，而库函数则更加复杂。</p>

        </div>

        
            <div class="post-copyright-info">
                <div class="article-copyright-info-container">
    <ul>
        <li>本文标题：APUE学习笔记00——UNIX基础</li>
        <li>本文作者：Xilong Yang</li>
        <li>创建时间：2021-10-27 20:36:29</li>
        <li>
            本文链接：https://xilong.site/zh/blog/2021/10/27/0029-APUE_chapter1/
        </li>
        <li>
            版权声明：本博客所有文章除特别声明外，均采用 <a class="license" target="_blank" rel="noopener" href="https://creativecommons.org/licenses/by-nc-sa/4.0/deed.zh">BY-NC-SA</a> 许可协议。转载请注明出处！
        </li>
    </ul>
</div>

            </div>
        

        
            <ul class="post-tags-box">
                
                    <li class="tag-item">
                        <a href="/zh/blog/tags/Linux/">#Linux</a>&nbsp;
                    </li>
                
                    <li class="tag-item">
                        <a href="/zh/blog/tags/UNIX/">#UNIX</a>&nbsp;
                    </li>
                
            </ul>
        

        
            <div class="article-nav">
                
                    <div class="article-prev">
                        <a class="prev"
                           rel="prev"
                           href="/zh/blog/2021/11/01/0030-string_matching_KMP/"
                        >
                            <span class="left arrow-icon flex-center">
                              <i class="fas fa-chevron-left"></i>
                            </span>
                            <span class="title flex-center">
                                <span class="post-nav-title-item">字符串匹配之KMP</span>
                                <span class="post-nav-item">上一篇</span>
                            </span>
                        </a>
                    </div>
                
                
                    <div class="article-next">
                        <a class="next"
                           rel="next"
                           href="/zh/blog/2021/09/23/0028-RB_Tree_C++/"
                        >
                            <span class="title flex-center">
                                <span class="post-nav-title-item">红黑树概念解析与C++实现</span>
                                <span class="post-nav-item">下一篇</span>
                            </span>
                            <span class="right arrow-icon flex-center">
                              <i class="fas fa-chevron-right"></i>
                            </span>
                        </a>
                    </div>
                
            </div>
        

        
    </div>
</div>


                
            </div>

        </div>

        <div class="page-main-content-bottom">
            <footer class="footer">
    <div class="info-container">
        <div class="copyright-info info-item">
            &copy;
            
              <span>2019</span>
              -
            
            2022&nbsp;<i class="fas fa-heart icon-animate"></i>&nbsp;<a href="/">Xilong Yang</a>
        </div>
        
        <div class="theme-info info-item">
            由 <a target="_blank" href="https://hexo.io">Hexo</a> 驱动&nbsp;|&nbsp;主题&nbsp;<a class="theme-version" target="_blank" href="https://github.com/XPoet/hexo-theme-keep">Keep v3.4.5</a>
        </div>
        
        
    </div>
</footer>

        </div>
    </div>

    
        <div class="post-tools">
            <div class="post-tools-container">
    <ul class="tools-list">
        <!-- TOC aside toggle -->
        
            <li class="tools-item page-aside-toggle">
                <i class="fas fa-outdent"></i>
            </li>
        

        <!-- go comment -->
        
    </ul>
</div>

        </div>
    

    <div class="right-bottom-side-tools">
        <div class="side-tools-container">
    <ul class="side-tools-list">
        <li class="tools-item tool-font-adjust-plus flex-center">
            <i class="fas fa-search-plus"></i>
        </li>

        <li class="tools-item tool-font-adjust-minus flex-center">
            <i class="fas fa-search-minus"></i>
        </li>

        <li class="tools-item tool-expand-width flex-center">
            <i class="fas fa-arrows-alt-h"></i>
        </li>

        <li class="tools-item tool-dark-light-toggle flex-center">
            <i class="fas fa-moon"></i>
        </li>

        <!-- rss -->
        

        
            <li class="tools-item tool-scroll-to-top flex-center">
                <i class="fas fa-arrow-up"></i>
            </li>
        

        <li class="tools-item tool-scroll-to-bottom flex-center">
            <i class="fas fa-arrow-down"></i>
        </li>
    </ul>

    <ul class="exposed-tools-list">
        <li class="tools-item tool-toggle-show flex-center">
            <i class="fas fa-cog fa-spin"></i>
        </li>
        
    </ul>
</div>

    </div>

    
        <aside class="page-aside">
            <div class="post-toc-wrap">
    <div class="post-toc">
        <ol class="nav"><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%9F%BA%E7%A1%80%E4%BB%8B%E7%BB%8D"><span class="nav-text">基础介绍</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%99%BB%E5%BD%95"><span class="nav-text">登录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%96%87%E4%BB%B6%E5%92%8C%E7%9B%AE%E5%BD%95"><span class="nav-text">文件和目录</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E8%BE%93%E5%85%A5%E4%B8%8E%E8%BE%93%E5%87%BA"><span class="nav-text">输入与输出</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%A8%8B%E5%BA%8F%E5%92%8C%E8%BF%9B%E7%A8%8B"><span class="nav-text">程序和进程</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E5%87%BA%E9%94%99%E5%A4%84%E7%90%86"><span class="nav-text">出错处理</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%94%A8%E6%88%B7%E6%A0%87%E8%AF%86"><span class="nav-text">用户标识</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E4%BF%A1%E5%8F%B7"><span class="nav-text">信号</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E6%97%B6%E9%97%B4%E5%80%BC"><span class="nav-text">时间值</span></a></li><li class="nav-item nav-level-2"><a class="nav-link" href="#%E7%B3%BB%E7%BB%9F%E8%B0%83%E7%94%A8%E4%B8%8E%E5%BA%93%E5%87%BD%E6%95%B0"><span class="nav-text">系统调用与库函数</span></a></li></ol>
    </div>
</div>
        </aside>
    

    <div class="image-viewer-container">
    <img src="">
</div>


    
        <div class="search-pop-overlay">
    <div class="popup search-popup">
        <div class="search-header">
          <span class="search-input-field-pre">
            <i class="fas fa-keyboard"></i>
          </span>
            <div class="search-input-container">
                <input autocomplete="off"
                       autocorrect="off"
                       autocapitalize="off"
                       placeholder="搜索..."
                       spellcheck="false"
                       type="search"
                       class="search-input"
                >
            </div>
            <span class="popup-btn-close">
                <i class="fas fa-times"></i>
            </span>
        </div>
        <div id="search-result">
            <div id="no-result">
                <i class="fas fa-spinner fa-pulse fa-5x fa-fw"></i>
            </div>
        </div>
    </div>
</div>

    

</main>




<script src="/zh/blog/js/utils.js"></script>

<script src="/zh/blog/js/main.js"></script>

<script src="/zh/blog/js/header-shrink.js"></script>

<script src="/zh/blog/js/back2top.js"></script>

<script src="/zh/blog/js/dark-light-toggle.js"></script>



    
<script src="/zh/blog/js/local-search.js"></script>







<div class="post-scripts">
    
        
<script src="/zh/blog/js/left-side-toggle.js"></script>

<script src="/zh/blog/js/libs/anime.min.js"></script>

<script src="/zh/blog/js/toc.js"></script>

    
</div>



</body>
</html>
